window.aivaController={numberCtas:0,bgEl:[],popupEl:[],closeBtnEl:{},shown:[],isShown:0,videoApiReady:[],displayConditionMet:[],dataSent:0,overflowDefault:"visible",scaleTo:[],transformDefault:[],maxZindex:2147483647,isMobile:!1,isIOS:!1,isPreview:!1,mainCssLoaded:!1,schedulingParsed:!1,appProtocol:"",persistCode:"NOTSET",startDate:[],timeElapsed:[],clientEmail:"NOTSET",currentScore:[],success:[],mousePosArray:[],emailsCollected:[],textCollected:[],submitValue:"none",urlClicked:"none",width:[],height:[],oldPosition:[],html:[],css:[],injectJs:[],videoJson:[],videoPlayersAdded:0,videoPlayersLoaded:[],videoPlayersReady:0,playersYT:[],playersVimeo:[],ctaName:[],transitionType:[],triggerType:[],triggerValue:[],domainsEnabled:[],paymentPlan:[],pageSelection:[],pageWhiteList:[],pageBlackList:[],scrollLock:[],clickLock:[],horizontalPositioning:[],verticalPositioning:[],dimBackground:[],hideThisCta:[],fonts:["//fonts.googleapis.com/css?family=Open+Sans:400,700"],delay:1,cookieExp:[],targetAllUsers:[],scheduleRange:[],scheduleTime:[],scheduleHours:[],scheduleStart:[],scheduleFinish:[],socket:"NOTSET",cookieManager:{create:function(e,l,t){var o="";if(t){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3),o="; expires="+a.toGMTString()}document.cookie=e+"="+l+o+"; path=/"},get:function(e){for(var l=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var a=t[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(l))return a.substring(l.length,a.length)}return null},erase:function(){this.create(name,"",-1)}},checkCookie:function(e){aivaController.cookieExp[e]="all"==aivaController.targetAllUsers[e]?0:365;var l=aivaController.ctaName[e].replace(/ /g,"_");return aivaController.cookieExp[e]>0?"true"==aivaController.cookieManager.get(l+"_aivaController_shown")?"returning"==aivaController.targetAllUsers[e]?!0:!1:(aivaController.cookieManager.create(l+"_aivaController_shown","true",aivaController.cookieExp[e]),"returning"==aivaController.targetAllUsers[e]?!1:!0):(aivaController.cookieManager.erase(l+"_aivaController_shown"),!0)},toScriptElement:function(e){var l=document.createElement("script");return l.type="text/javascript",l.text=e,l},checkPage:function(e){function l(e){return e=e.replace("http://",""),e=e.replace("https://",""),e=e.replace("www.",""),e=e.trim(),"/"===e.substr(e.length-1,e.length)&&(e=e.substr(0,e.length-1)),e}this.pageWhiteList[e]=this.pageWhiteList[e].replace(/^\[|\]$/gm,""),this.pageBlackList[e]=this.pageBlackList[e].replace(/^\[|\]$/gm,"");var t=window.location.href;t=l(t);var o=t.split("/");o=o[0];var a;a="any"==this.pageSelection[e]?this.pageBlackList[e].split(","):this.pageWhiteList[e].split(",");for(var r=0;r<a.length;r++)a[r]=l(a[r]);return this.domainsEnabled[e]=l(this.domainsEnabled[e]),this.domainsEnabled[e]==o?"any"==this.pageSelection[e]&&"-1"==a.indexOf(t)?!0:"specific"==this.pageSelection[e]&&"-1"!=a.indexOf(t)?!0:!1:!1},checkScheduling:function(e){var l=!0;if(this.schedulingParsed||(this.scheduleStart[e]=this.scheduleStart[e].split("-"),this.scheduleStart[e]=new Date(this.scheduleStart[e][0],this.scheduleStart[e][1]-1,this.scheduleStart[e][2]),this.scheduleFinish[e]=this.scheduleFinish[e].split("-"),this.scheduleFinish[e]=new Date(this.scheduleFinish[e][0],this.scheduleFinish[e][1]-1,this.scheduleFinish[e][2],23,59,59),this.scheduleHours[e]=JSON.parse("["+this.scheduleHours[e].replace(/^\[|\]$/gm,"").replace(/;/gm,",").replace(/'/gm,'"')+"]"),this.schedulingParsed=!0),"allyear"!=this.scheduleRange[e]&&(this.startDate[e].getTime()<this.scheduleStart[e].getTime()||this.startDate[e].getTime()>this.scheduleFinish[e].getTime())&&(l=!1),"allday"!=this.scheduleTime[e]){for(var t=this.startDate[e].getDay(),o=this.startDate[e].getHours(),a=0,r=0,i=this.scheduleHours[e].length;i>r;r++)if(o>=this.scheduleHours[e][r].from&&o<this.scheduleHours[e][r].to)if(""==this.scheduleHours[e][r].period)a++;else switch(t){case 0:"Sun"==this.scheduleHours[e][r].period&&a++;break;case 1:"Mon"==this.scheduleHours[e][r].period&&a++;break;case 2:"Tue"==this.scheduleHours[e][r].period&&a++;break;case 3:"Wed"==this.scheduleHours[e][r].period&&a++;break;case 4:"Thu"==this.scheduleHours[e][r].period&&a++;break;case 5:"Fri"==this.scheduleHours[e][r].period&&a++;break;case 6:"Sat"==this.scheduleHours[e][r].period&&a++}1>a&&(l=!1)}return l},removeCta:function(e){this.ctaName.splice(e,1),this.width.splice(e,1),this.height.splice(e,1),this.html.splice(e,1),this.videoApiReady.splice(e,1),this.displayConditionMet.splice(e,1),this.domainsEnabled.splice(e,1),this.injectJs.splice(e,1),this.videoJson.splice(e,1),this.transitionType.splice(e,1),this.triggerType.splice(e,1),this.triggerValue.splice(e,1),this.pageSelection.splice(e,1),this.pageWhiteList.splice(e,1),this.pageBlackList.splice(e,1),this.scheduleRange.splice(e,1),this.scheduleTime.splice(e,1),this.scheduleHours.splice(e,1),this.scheduleStart.splice(e,1),this.scheduleFinish.splice(e,1),this.scrollLock.splice(e,1),this.clickLock.splice(e,1),this.verticalPositioning.splice(e,1),this.horizontalPositioning.splice(e,1),this.dimBackground.splice(e,1),this.targetAllUsers.splice(e,1),this.cookieExp.splice(e,1),this.shown.splice(e,1),this.startDate.splice(e,1),this.timeElapsed.splice(e,1),this.scaleTo.splice(e,1),this.currentScore.splice(e,1),this.success.splice(e,1),this.mousePosArray.splice(e,1),this.emailsCollected.splice(e,1),this.textCollected.splice(e,1),this.hideThisCta.splice(e,1),this.numberCtas--},trimCtas:function(){for(var e=0;e<this.numberCtas;e++)if(1==this.hideThisCta[e])this.removeCta(e),e--;else if(this.isMobile&&-1===this.ctaName[e].search("(Mobile)"))this.removeCta(e),e--;else if(this.isMobile||-1===this.ctaName[e].search("(Mobile)")){if(!this.isPreview){var l=document.createElement("div");l.innerHTML=this.html[e],l.getElementsByClassName("aiva-elem").length<1&&!this.videoJson[e]&&(console.log("Empty overlay detected! Please add elements to your overlay before exporting."),this.removeCta(e),e--)}}else this.removeCta(e),e--},addOverlay:function(e){for(var l=0;l<this.fonts.length;l++){var t=document.createElement("link");t.href=this.fonts[l],t.type="text/css",t.rel="stylesheet",t.id="aiva_font",document.head.appendChild(t)}var o=document.createElement("script");o.id="aiva_vendor_css",o.src=this.appProtocol+"//use.fontawesome.com/7c48d6f13d.js",document.head.appendChild(o);var a=document.createElement("script");a.src=this.appProtocol+"//www.youtube.com/iframe_api",document.head.appendChild(a);var r=document.createTextNode("");r.textContent=r.textContent+"#aiva_ep_bg_"+e+" {display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; opacity: 0; z-index: "+(this.maxZindex-this.numberCtas)+";}#aiva_ep_"+e+" {display: none; position: fixed; width: "+this.width[e]+"px; height: "+this.height[e]+"px; font-size: 15px; left: 50%; top: 50%; transform: translateX(-50%) translateY(-50%); z-index: "+(this.maxZindex-e)+";}",0==this.mainCssLoaded&&(r.textContent=r.textContent+this.css,this.mainCssLoaded=!0);var i=document.createElement("style");i.type="text/css",i.id="aiva_css",i.appendChild(r),document.head.insertBefore(i,document.head.firstChild)},addSocket:function(){var e=window.location.href.split("/");this.appProtocol=e[0];var l=document.createElement("script");l.type="text/javascript",l.src=this.appProtocol+"//aivalabs.com/cta/socket.io/socket.io.js",document.body.appendChild(l),l.onload=function(){socket=io.connect(aivaController.appProtocol+"//aivalabs.com/",{query:"identity="+aivaController.persistCode,transports:["polling"]}),socket.on("connect",function(){console.log("Socket connected"),socket.emit("connected",{clientEmail:aivaController.clientEmail})})}},addPopup:function(e){if(this.bgEl[e]=document.createElement("div"),this.bgEl[e].id="aiva_ep_bg_"+e,this.popupEl[e]=document.createElement("div"),this.popupEl[e].id="aiva_ep_"+e,this.popupEl[e].innerHTML=this.html[e],this.videoJson[e])for(var l=0;l<this.videoJson[e].length;l++){var t;"youtube"===this.videoJson[e][l].type?(t=document.createElement("div"),t.id="playerYT-"+this.videoPlayersReady):"vimeo"===this.videoJson[e][l].type&&(t=document.createElement("div"),t.id="playerVimeo-"+this.videoPlayersReady),this.popupEl[e].getElementsByClassName(this.videoJson[e][l].videoClass).item(0).appendChild(t),this.videoPlayersReady++}this.isPreview?(document.getElementById("previewElement").appendChild(this.bgEl[e]),document.getElementById("previewElement").appendChild(this.popupEl[e])):(document.body.appendChild(this.bgEl[e]),document.body.appendChild(this.popupEl[e]))},scoreKeeper:function(e,l){this.currentScore[e]+=l,this.currentScore[e]<0&&(this.currentScore[e]=0)},runAnimation:function(e,l){function t(){function t(){a>100?clearInterval(y):0==a?(n.style.opacity=0,s.style.display="block",n.style.display="block"):n.style.opacity=.01*a,a++}if(o>100){clearInterval(C);var s=document.createElement("a"),n=document.createElement("img");s.appendChild(n),s.style.height="23px",s.style.width=37*aivaController.scaleTo[l]+"px",s.target="_blank",s.rel="noopener noreferrer",n.src=1==aivaController.dimBackground[l]?aivaController.appProtocol+"//aivalabs.com/aiva-create/assets/images/aivaPowerWhite.png":aivaController.appProtocol+"//aivalabs.com/aiva-create/assets/images/aivaPowerBlack.png",s.style.top=1===p?-(parseFloat(s.style.height)+2)+"px":aivaController.height[l]+2+"px",s.style.left=-1===d?"0px":aivaController.width[l]-parseFloat(s.style.width)+"px",("free"===aivaController.paymentPlan[l]||"free-monthly"===aivaController.paymentPlan[l])&&aivaController.popupEl[l].appendChild(s),s.href=aivaController.appProtocol+"//aivalabs.com/",s.style.display="none",s.style.borderStyle="none",n.style.display="none",n.style.borderStyle="none",s.style.position="absolute";var y=setInterval(t,15)}else{switch(aivaController.transitionType[l]){case"bottom-slide-in":0===o?(i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") translate(0px,"+(window.innerHeight+aivaController.height[l]/2)+"px)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate(0px,"+(window.innerHeight+aivaController.height[l]/2)+"px)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate(0px,"+(window.innerHeight+aivaController.height[l]/2)+"px)",aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.WebkitTransition="all 2s",aivaController.popupEl[l].style.transition="all 2s"):50>o||(aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)");break;case"top-slide-in":0===o?(i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") translate(0px,"+-(window.innerHeight+aivaController.height[l]/2)+"px)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate(0px,"+-(window.innerHeight+aivaController.height[l]/2)+"px)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate(0px,"+-(window.innerHeight+aivaController.height[l]/2)+"px)",aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.WebkitTransition="all 2s",aivaController.popupEl[l].style.transition="all 2s"):50>o||(aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)");break;case"right-slide-in":0===o?(i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") translate("+(document.body.clientWidth+aivaController.width[l]/2)+"px,0px)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate("+(document.body.clientWidth+aivaController.width[l]/2)+"px,0px)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate("+(document.body.clientWidth+aivaController.width[l]/2)+"px,0px)",aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.WebkitTransition="all 2s",aivaController.popupEl[l].style.transition="all 2s"):50>o||(aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)");break;case"left-slide-in":0===o?(i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") translate("+-(document.body.clientWidth+aivaController.width[l]/2)+"px,0px)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate("+-(document.body.clientWidth+aivaController.width[l]/2)+"px,0px)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate("+-(document.body.clientWidth+aivaController.width[l]/2)+"px,0px)",aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.WebkitTransition="all 2s",aivaController.popupEl[l].style.transition="all 2s"):50>o||(aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate(0px,0px)");break;case"normal-fade-in":0===o?(i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+")",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+")",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+")",aivaController.popupEl[l].style.opacity=0,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.WebkitTransition="all 1s",aivaController.popupEl[l].style.transition="all 1s"):50>o||(aivaController.popupEl[l].style.opacity=1);break;case"twirl":0===o?(i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.msTransform="scale(0) rotate(720deg)",aivaController.popupEl[l].style.WebkitTransform="scale(0) rotate(720deg)",aivaController.popupEl[l].style.transform="scale(0) rotate(720deg)",aivaController.popupEl[l].style.WebkitTransition="all 1s",aivaController.popupEl[l].style.transition="all 1s"):50>o||(aivaController.popupEl[l].style.msTransform="scale("+aivaController.scaleTo[l]+") rotate(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") rotate(0deg)",aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") rotate(0deg)");break;case"grow-in":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",aivaController.popupEl[l].style.opacity=0,aivaController.popupEl[l].style.WebkitTransition="all 2s",aivaController.popupEl[l].style.MozTransition="all 2s",aivaController.popupEl[l].style.transition="all 2s",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(0) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.WebkitTransform="scale(0) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.MozTransform="scale(0) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.MsTransform="scale(0) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.WebkitTransition="all 2s",popupElChildren[m].style.transition="all 2s",popupElChildren[m].style.MozTransition="all 2s"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.opacity=1;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.MozTransform="scale(1) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.MsTransform="scale(1) translateZ(0px) rotateX(0deg)"}break;case"top-fall-in":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.WebkitTransform="scale(1) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.MozTransform="scale(1) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.MsTransform="scale(1) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.6s  ease-in",popupElChildren[m].style.transition="all 1.6s ease-in",popupElChildren[m].style.MozTransition="all 1.6s ease-in"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) rotateX(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.MozTransform="scale(1) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.MsTransform="scale(1) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.opacity=1}break;case"side-fall":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) translate(30%) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.WebkitTransform="scale(1) translate(30%) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.MozTransform="scale(1) translate(30%) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.MsTransform="scale(1) translate(30%) translateZ(600px) rotateX(20deg)",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.6s  ease-in",popupElChildren[m].style.transition="all 1.6s ease-in",popupElChildren[m].style.MozTransition="all 1.6s ease-in"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translate(0%) translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translate(0%) translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") translate(0%) translateZ(0px) rotateX(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") translate(0%) translateZ(0px) rotateX(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) translate(0%) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) translate(0%) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.MozTransform="scale(1) translate(0%) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.MsTransform="scale(1) translate(0%) translateZ(0px) rotateX(0deg)",popupElChildren[m].style.opacity=1}break;case"horizontal-flip":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) rotateY(-400deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateY(-400deg)",popupElChildren[m].style.MozTransform="scale(1) rotateY(-400deg)",popupElChildren[m].style.MsTransform="scale(1) rotateY(-400deg)",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.6s",popupElChildren[m].style.transition="all 1.6s",popupElChildren[m].style.MozTransition="all 1.6s"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") rotateY(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") rotateY(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") rotateY(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") rotateY(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) rotateY(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateY(0deg)",popupElChildren[m].style.MozTransform="scale(1) rotateY(0deg)",popupElChildren[m].style.MsTransform="scale(1) rotateY(0deg)",popupElChildren[m].style.opacity=1}break;case"super-horizontal-flip":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) rotateY(-2000deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateY(-2000deg)",popupElChildren[m].style.MozTransform="scale(1) rotateY(-2000deg)",popupElChildren[m].style.MsTransform="scale(1) rotateY(-2000deg)",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.6s",popupElChildren[m].style.transition="all 1.6s",popupElChildren[m].style.MozTransition="all 1.6s"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") rotateY(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") rotateY(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") rotateY(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") rotateY(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) rotateY(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateY(0deg)",popupElChildren[m].style.MozTransform="scale(1) rotateY(0deg)",popupElChildren[m].style.MsTransform="scale(1) rotateY(0deg)",popupElChildren[m].style.opacity=1}break;case"vertical-flip":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) rotateX(-400deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateX(-400deg)",popupElChildren[m].style.MozTransform="scale(1) rotateX(-400deg)",popupElChildren[m].style.MsTransform="scale(1) rotateX(-400deg)",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.6s",popupElChildren[m].style.transition="all 1.6s",popupElChildren[m].style.MozTransition="all 1.6s"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) rotateX(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.MozTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.MsTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.opacity=1}break;case"super-vertical-flip":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) rotateX(-2000deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateX(-2000deg)",popupElChildren[m].style.MozTransform="scale(1) rotateX(-2000deg)",popupElChildren[m].style.MsTransform="scale(1) rotateX(-2000deg)",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.6s",popupElChildren[m].style.transition="all 1.6s",popupElChildren[m].style.MozTransition="all 1.6s"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) rotateX(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.MozTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.MsTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.opacity=1}break;case"3d-rotate-left":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) translateZ(100px) translateX(-30%) rotateY(90deg)",popupElChildren[m].style.WebkitTransform="scale(1) translateZ(100px) translateX(-30%) rotateY(90deg)",popupElChildren[m].style.MozTransform="scale(1) translateZ(100px) translateX(-30%) rotateY(90deg)",popupElChildren[m].style.MsTransform="scale(1) translateZ(100px) translateX(-30%) rotateY(90deg)",popupElChildren[m].style.WebkitTransformOrigin="0 100%",popupElChildren[m].style.MozTransformOrigin="0 100%",popupElChildren[m].style.transformOrigin="0 100%",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.6s",popupElChildren[m].style.transition="all 1.6s",popupElChildren[m].style.MozTransition="all 1.6s"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translateZ(0px) translateX(0%) rotateY(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) translateX(0%) rotateY(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) translateX(0%) rotateY(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) translateX(0%) rotateY(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) translateZ(0px) translateX(0%) rotateY(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) translateZ(0px) translateX(0%) rotateY(0deg)",popupElChildren[m].style.MozTransform="scale(1) translateZ(0px) translateX(0%) rotateY(0deg)",popupElChildren[m].style.MsTransform="scale(1) translateZ(0px) translateX(0%) rotateY(0deg)",popupElChildren[m].style.opacity=1
}break;case"3d-rotate-right":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) translateZ(100px) translateX(30%) rotateY(-90deg)",popupElChildren[m].style.WebkitTransform="scale(1) translateZ(100px) translateX(30%) rotateY(-90deg)",popupElChildren[m].style.MozTransform="scale(1) translateZ(100px) translateX(30%) rotateY(-90deg)",popupElChildren[m].style.MsTransform="scale(1) translateZ(100px) translateX(30%) rotateY(-90deg)",popupElChildren[m].style.WebkitTransformOrigin="0 -100%",popupElChildren[m].style.MozTransformOrigin="0 -100%",popupElChildren[m].style.transformOrigin="0 -100%",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.6s",popupElChildren[m].style.transition="all 1.6s",popupElChildren[m].style.MozTransition="all 1.6s"}else if(o>=50){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") translateZ(0px) translateX(0%) rotateY(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) translateX(0%) rotateY(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) translateX(0%) rotateY(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") translateZ(0px) translateX(0%) rotateY(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) translateZ(0px) translateX(0%) rotateY(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) translateZ(0px) translateX(0%) rotateY(0deg)",popupElChildren[m].style.MozTransform="scale(1) translateZ(0px) translateX(0%) rotateY(0deg)",popupElChildren[m].style.MsTransform="scale(1) translateZ(0px) translateX(0%) rotateY(0deg)",popupElChildren[m].style.opacity=1}break;case"3d-sign":if(0===o){i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.perspective="1300px",aivaController.popupEl[l].style.WebkitPerspective="1300px",aivaController.popupEl[l].style.MozPerspective="1300px",popupElChildren=aivaController.popupEl[l].children;for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.WebkitTransformStyle="preserve-3d",popupElChildren[m].style.MozTransformStyle="preserve-3d",popupElChildren[m].style.transformStyle="preserve-3d",popupElChildren[m].style.transform="scale(1) rotateX(-60deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateX(-60deg)",popupElChildren[m].style.MozTransform="scale(1) rotateX(-60deg)",popupElChildren[m].style.MsTransform="scale(1) rotateX(-60deg)",popupElChildren[m].style.WebkitTransformOrigin="50% 0",popupElChildren[m].style.MozTransformOrigin="50% 0",popupElChildren[m].style.transformOrigin="50% 0",popupElChildren[m].style.opacity=0,popupElChildren[m].style.WebkitTransition="all 1.2s",popupElChildren[m].style.transition="all 1.2s",popupElChildren[m].style.MozTransition="all 1.2s"}else if(o>=70){aivaController.popupEl[l].style.transform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.WebkitTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.MozTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)",aivaController.popupEl[l].style.MsTransform="scale("+aivaController.scaleTo[l]+") rotateX(0deg)";for(var m=0;m<popupElChildren.length;m++)popupElChildren[m].style.transform="scale(1) rotateX(0deg)",popupElChildren[m].style.WebkitTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.MozTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.MsTransform="scale(1) rotateX(0deg)",popupElChildren[m].style.opacity=1}break;case"zoom-in":0===o?(i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.msTransform="scale(0)",aivaController.popupEl[l].style.WebkitTransform="scale(0)",aivaController.popupEl[l].style.transform="scale(0)",aivaController.popupEl[l].style.opacity=0,aivaController.popupEl[l].style.WebkitTransition="all 1.6s ease-in",aivaController.popupEl[l].style.transition="all 1.6s ease-in"):50>o||(aivaController.popupEl[l].style.opacity=1,aivaController.popupEl[l].style.msTransform="scale(1)",aivaController.popupEl[l].style.WebkitTransform="scale(1)",aivaController.popupEl[l].style.transform="scale(1)");break;case"zoom-out":0===o?(i=(window.innerHeight-aivaController.height[l])/2,r=(document.body.clientWidth-aivaController.width[l])/2,aivaController.bgEl[l].style.display="block",aivaController.popupEl[l].style.display="block",aivaController.popupEl[l].style.opacity=0,aivaController.popupEl[l].style.msTransform="scale(3)",aivaController.popupEl[l].style.WebkitTransform="scale(3)",aivaController.popupEl[l].style.transform="scale(3)",aivaController.popupEl[l].style.WebkitTransition="all 1.6s ease-in",aivaController.popupEl[l].style.transition="all 1.6s ease-in"):50>o||(aivaController.popupEl[l].style.opacity=1,aivaController.popupEl[l].style.msTransform="scale(1)",aivaController.popupEl[l].style.WebkitTransform="scale(1)",aivaController.popupEl[l].style.transform="scale(1)")}aivaController.isPreview?(e.style.top=i+v-c+"px",e.style.left=r+u-h+"px"):(e.style.top=i+v+"px",e.style.left=r+u+"px"),1==aivaController.dimBackground[l]&&(aivaController.bgEl[l].style.opacity=.005*o),o++}}aivaController.scalePopup(!1,l);var o=0,a=0,r=0,i=0,s=document.body.clientWidth/2,n=window.innerHeight/2,p=0,d=0;switch(this.horizontalPositioning[l]){case"right":d=1;break;case"left":d=-1}switch(this.verticalPositioning[l]){case"top":p=-1;break;case"bottom":p=1}if(this.isPreview)var c=.025*window.innerHeight*p,h=.025*document.body.clientWidth*d;var v=(n-aivaController.height[l]*aivaController.scaleTo[l]/2)*p,u=(s-aivaController.width[l]*aivaController.scaleTo[l]/2)*d,C=(.005*(window.innerHeight+aivaController.height[l]*aivaController.scaleTo[l]),.005*(document.body.clientWidth+aivaController.width[l]*aivaController.scaleTo[l]),setInterval(t,7))},showPopup:function(e){if(0===this.videoJson[e].length&&(this.videoApiReady[e]=!0),this.videoApiReady[e]&&this.displayConditionMet[e]){if(-1!=this.shown.indexOf(!0))return;this.startDate[e]=new Date;var l=document.getElementById("aiva_ep_"+e);this.runAnimation(l,e),1==this.scrollLock[e]&&(this.overflowDefault=document.body.style.overflow,document.body.style.overflow="hidden"),this.shown[e]=!0,this.isShown=1;for(var t=0,o=0;e>o;o++)this.domainsEnabled[o]===this.domainsEnabled[e]&&this.checkCookie(o)&&this.checkPage(o)&&this.checkScheduling(o)&&(t+=this.videoJson[o].length);for(var a=0;a<this.videoJson[e].length;a++)"youtube"===this.videoJson[e][a].type&&"1"===this.videoJson[e][a].autoplay&&this.playersYT[t+a].playVideo()}},submitInfo:function(){for(var e=this.shown.indexOf(!0),l=this.popupEl[e].getElementsByTagName("input"),t="",o="",a="",r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=0,s=l.length;s>i;i++)a=l.item(i).getAttribute("placeholder"),o=l.item(i).value,""!==o&&(t=a+" = "+o,"email"==l.item(i).getAttribute("type")&&r.test(o)?this.emailsCollected[e].push(t):this.textCollected[e].push(t));this.emailsCollected[e].length+this.textCollected[e].length==l.length?(aivaController.success[e]=1,aivaController.hidePopup()):(this.emailsCollected[e].length=0,this.textCollected[e].length=0)},hidePopup:function(){var e=this.shown.indexOf(!0);this.bgEl[e].style.display="none",this.popupEl[e].style.display="none",this.popupEl[e].innerHTML="",this.timeElapsed[e]=new Date-this.startDate[e],1==this.scrollLock[e]&&(document.body.style.overflow=this.overflowDefault),"none"!=this.submitValue&&(this.success[e]=1,this.textCollected[e].push("submit value = "+this.submitValue)),this.returnAnalytics()},returnAnalytics:function(){if(!this.isPreview){var e=this.shown.indexOf(!0);this.isShown?socket.emit("analytics",{clientEmail:this.clientEmail,cta:this.isShown,score:this.currentScore[e],success:this.success[e],name:this.ctaName[e],email:this.emailsCollected[e].join(),textCollected:this.textCollected[e].join(),submitValue:this.submitValue,urlClicked:this.urlClicked,time:this.timeElapsed[e],mousePosition:this.mousePosArray[e].join(),prev_site:document.referrer}):socket.emit("analytics",{clientEmail:this.clientEmail,cta:this.isShown,score:0,success:0,name:"None shown",email:"",textCollected:"",submitValue:"",urlClicked:"",time:0,mousePosition:"",prev_site:document.referrer}),this.dataSent=1}},scalePopup:function(e,l){var t={width:40,height:40},o={width:aivaController.width[l],height:aivaController.height[l]},a={width:window.innerWidth,height:window.innerHeight},r={width:0,height:0},i=o.width/o.height;o.width>a.width-t.width&&(r.width=a.width-t.width,r.height=r.width/i,r.height>a.height-t.height&&(r.height=a.height-t.height,r.width=r.height*i)),0===r.height&&o.height>a.height-t.height&&(r.height=a.height-t.height,r.width=r.height*i);var s=r.width/o.width;(0>=s||s>1)&&(s=1),aivaController.scaleTo[l]=s,e&&(""===aivaController.transformDefault[l]&&(aivaController.transformDefault[l]=window.getComputedStyle(this.popupEl[l],null).getPropertyValue("transform")),aivaController.popupEl[l].style.transform=aivaController.transformDefault[l]+" scale("+aivaController.scaleTo[l]+")")},preloadVideos:function(){window.onYouTubeIframeAPIReady=function(){for(var e=0;e<aivaController.videoJson.length;e++)aivaController.checkCookie(e)&&aivaController.checkPage(e)&&aivaController.checkScheduling(e)&&!function(e){for(var l=0;l<aivaController.videoJson[e].length;l++)"youtube"===aivaController.videoJson[e][l].type?aivaController.playersYT.push(new YT.Player("playerYT-"+aivaController.videoPlayersAdded,{height:aivaController.videoJson[e][l].height,width:aivaController.videoJson[e][l].width,videoId:aivaController.videoJson[e][l].videoId,playerVars:{autoplay:"0",start:aivaController.videoJson[e][l].startTime,end:aivaController.videoJson[e][l].endTime},events:{onReady:function(e,l,t){return function(){for(var o=0,a=0;e>a;a++)aivaController.domainsEnabled[a]===aivaController.domainsEnabled[e]&&aivaController.checkCookie(a)&&aivaController.checkPage(a)&&aivaController.checkScheduling(a)&&(o+=aivaController.videoJson[a].length);"1"===aivaController.videoJson[e][l].isMuted?(t[l+o].mute(),aivaController.videoPlayersLoaded[e]++):aivaController.videoPlayersLoaded[e]++,aivaController.videoPlayersLoaded[e]===aivaController.videoJson[e].length&&setTimeout(function(){aivaController.videoApiReady[e]=!0,aivaController.showPopup(e)},1e3)}}(e,l,aivaController.playersYT),onStateChange:function(e,l,t){return function(o){for(var a=0,r=0;e>r;r++)aivaController.domainsEnabled[r]===aivaController.domainsEnabled[e]&&aivaController.checkCookie(r)&&aivaController.checkPage(r)&&aivaController.checkScheduling(r)&&(a+=aivaController.videoJson[r].length);"1"===aivaController.videoJson[e][l].loop&&0===o.data&&(aivaController.videoJson[e][l].startTime?(t[l+a].seekTo(aivaController.videoJson[e][l].startTime,!0),t[l+a].playVideo()):t[l+a].playVideo())}}(e,l,aivaController.playersYT)}})):"vimeo"===aivaController.videoJson[e][l].type&&(aivaController.playersVimeo.push(new Vimeo.Player("playerVimeo-"+[aivaController.videoPlayersAdded],{id:aivaController.videoJson[e][l].videoId,height:aivaController.videoJson[e][l].height,width:aivaController.videoJson[e][l].width,loop:aivaController.videoJson[e][l].loop,autoplay:aivaController.videoJson[e][l].autoplay})),playersVimeo[l].on("loaded",function(e,l){return function(t){"1"===aivaController.videoJson[e][l].isMuted&&t.setVolume(0)}}(e,l))),aivaController.videoPlayersAdded++;0===aivaController.videoJson[e].length&&(aivaController.videoApiReady[e]=!0,aivaController.showPopup(e))}(e)}},loadEvents:function(e){!function(e){switch(isNaN(aivaController.triggerValue[e])&&(aivaController.triggerValue[e]=10),aivaController.triggerType[e]){case"time":setTimeout(function(){aivaController.displayConditionMet[e]=!0,aivaController.showPopup(e)},1e3*aivaController.triggerValue[e]);break;case"exitIntent":document.addEventListener("mousemove",function(l){var t=window.pageYOffset||document.documentElement.scrollTop;aivaController.triggerValue[e]<2&&(aivaController.triggerValue[e]=2),l.pageY-t<aivaController.triggerValue[e]&&(aivaController.displayConditionMet[e]=!0,aivaController.showPopup(e))});break;case"adblock":var l=document.createElement("script");l.type="text/javascript",l.src=aivaController.appProtocol+"//www.aivalabs.com/aiva-create/webExports/advert.js",document.head.appendChild(l),setTimeout(function(){void 0==document.getElementById("aiva_adblockTester")&&(aivaController.displayConditionMet[e]=!0,aivaController.showPopup(e))},1e3*aivaController.triggerValue[e]);break;case"welcome":document.addEventListener("scroll",function(){aivaController.displayConditionMet[e]=!0,aivaController.showPopup(e)});break;case"scroll":0==aivaController.triggerValue[e]||aivaController.isPreview?(aivaController.displayConditionMet[e]=!0,aivaController.showPopup(e)):document.addEventListener("scroll",function(){var l=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight;l/t>aivaController.triggerValue[e]/100&&(aivaController.displayConditionMet[e]=!0,aivaController.showPopup(e))})}for(var t=aivaController.popupEl[e].getElementsByTagName("a"),o=0,a=t.length;a>o;o++)!function(l){t[l].onclick=function(){aivaController.success[e]=1,aivaController.urlClicked=t[l].href,aivaController.hidePopup()}}(o);if(aivaController.bgEl[e].addEventListener("click",function(){1==aivaController.clickLock[e]||(aivaController.scoreKeeper(e,-100),aivaController.hidePopup())}),aivaController.bgEl[e].addEventListener("mousemove",function(l){aivaController.scoreKeeper(e,-1),aivaController.mousePosArray[e].push("("+l.clientX+","+l.clientY+")")}),window.addEventListener("resize",function(){aivaController.scalePopup(e,!0)}),aivaController.popupEl[e].addEventListener("click",function(){aivaController.scoreKeeper(e,1e3)}),aivaController.popupEl[e].addEventListener("mousemove",function(){aivaController.scoreKeeper(e,2)}),aivaController.isMobile&&!aivaController.isIOS){var r=aivaController.popupEl[e].getElementsByTagName("input");if(r.length>0)for(var o=0;o<r.length;o++)!function(e,l){r.item(l).addEventListener("focus",function(){aivaController.oldPosition[e][0]=aivaController.popupEl[e].style.top,aivaController.oldPosition[e][1]=aivaController.popupEl[e].style.left,aivaController.oldPosition[e][2]=aivaController.scaleTo[e];var t=(parseFloat(aivaController.popupEl[e].style.top),parseInt(r.item(l).style.top)-(aivaController.height[e]-parseInt(r.item(l).style.height))/2),o=parseFloat(aivaController.popupEl[e].style.left),a=parseInt(r.item(l).style.left)-(aivaController.width[e]-parseInt(r.item(l).style.width))/2;aivaController.popupEl[e].style.top=0-t+"px",aivaController.popupEl[e].style.left=o-a+"px",aivaController.popupEl[e].style.msTransform="scale("+2*aivaController.scaleTo[e]+")",aivaController.popupEl[e].style.WebkitTransform="scale("+2*aivaController.scaleTo[e]+")",aivaController.popupEl[e].style.transform="scale("+2*aivaController.scaleTo[e]+")"}),r.item(l).addEventListener("focusout",function(){aivaController.popupEl[e].style.top=aivaController.oldPosition[e][0],aivaController.popupEl[e].style.left=aivaController.oldPosition[e][1],aivaController.popupEl[e].style.msTransform="scale("+aivaController.scaleTo[e]+")",aivaController.popupEl[e].style.WebkitTransform="scale("+aivaController.scaleTo[e]+")",aivaController.popupEl[e].style.transform="scale("+aivaController.scaleTo[e]+")"})}(e,o)}}(e)},arrayToFloat:function(e){for(var l=0;l<e.length;l++)e[l]=parseFloat(e[l]);return e},buildArrayWith:function(e,l){for(var t=0;t<this.numberCtas;t++)e.push(l)},setOptions:function(e){this.width=void 0===e.width?this.width:aivaController.arrayToFloat(e.width.split(",")),this.height=void 0===e.height?this.height:aivaController.arrayToFloat(e.height.split(",")),this.numberCtas=e.width.split(",").length,this.html=void 0===e.html?this.html:e.html.split(","),this.css=void 0===e.css?this.css:e.css,this.injectJs=void 0===e.injectJs?this.injectJs:e.injectJs.split(","),this.videoJson=void 0===e.videoJson?this.videoJson:e.videoJson.split(",break,");for(var l=0;l<this.videoJson.length;l++)this.videoJson[l]="["+this.videoJson[l].replace(/'/g,'"')+"]",this.videoJson[l]=JSON.parse(this.videoJson[l]);this.ctaName=void 0===e.ctaName?this.ctaName:e.ctaName.split(","),this.persistCode=void 0===e.persistCode?this.persistCode:e.persistCode,this.clientEmail=void 0===e.clientEmail?this.clientEmail:e.clientEmail,this.transitionType=void 0===e.transitionType?this.transitionType:e.transitionType.split(","),this.triggerType=void 0===e.triggerType?this.triggerType:e.triggerType.split(","),this.triggerValue=void 0===e.triggerValue?this.triggerValue:e.triggerValue.split(","),this.paymentPlan=void 0===e.paymentPlan?this.paymentPlan:e.paymentPlan.split(","),this.domainsEnabled=void 0===e.domainsEnabled?this.domainsEnabled:e.domainsEnabled.split(","),this.pageSelection=void 0===e.pageSelection?this.pageSelection:e.pageSelection.split(","),this.pageWhiteList=void 0===e.pageWhiteList?this.pageWhiteList:e.pageWhiteList.split("],["),this.pageBlackList=void 0===e.pageBlackList?this.pageBlackList:e.pageBlackList.split("],["),this.scrollLock=void 0===e.scrollLock?this.scrollLock:e.scrollLock.split(","),this.clickLock=void 0===e.clickLock?this.clickLock:e.clickLock.split(","),this.verticalPositioning=void 0===e.verticalPositioning?this.verticalPositioning:e.verticalPositioning.split(","),this.horizontalPositioning=void 0===e.horizontalPositioning?this.horizontalPositioning:e.horizontalPositioning.split(","),this.dimBackground=void 0===e.dimBackground?this.dimBackground:e.dimBackground.split(","),this.hideThisCta=void 0===e.hideThisCta?this.hideThisCta:e.hideThisCta.split(","),this.isPreview=void 0===e.isPreview?this.isPreview:e.isPreview,this.fonts=void 0===e.fonts?this.fonts:e.fonts.split(","),this.delay=void 0===e.delay?this.delay:e.delay,this.targetAllUsers=void 0===e.targetAllUsers?this.targetAllUsers:e.targetAllUsers.split(","),this.scheduleRange=void 0===e.scheduleRange?this.scheduleRange:e.scheduleRange.split(","),this.scheduleTime=void 0===e.scheduleTime?this.scheduleTime:e.scheduleTime.split(","),this.scheduleHours=void 0===e.scheduleHours?this.scheduleHours:e.scheduleHours.split("],["),this.scheduleStart=void 0===e.scheduleStart?this.scheduleStart:e.scheduleStart.split(","),this.scheduleFinish=void 0===e.scheduleFinish?this.scheduleFinish:e.scheduleFinish.split(","),void 0!==e.cookieExp&&this.buildArrayWith(this.cookieExp,0),this.buildArrayWith(this.shown,!1),this.buildArrayWith(this.videoApiReady,!1),this.buildArrayWith(this.videoPlayersLoaded,0),this.buildArrayWith(this.displayConditionMet,!1),this.buildArrayWith(this.startDate,new Date),this.buildArrayWith(this.timeElapsed,new Date),this.buildArrayWith(this.scaleTo,0),this.buildArrayWith(this.currentScore,0),this.buildArrayWith(this.success,0),this.buildArrayWith(this.mousePosArray,[]),this.buildArrayWith(this.emailsCollected,[]),this.buildArrayWith(this.textCollected,[]),this.buildArrayWith(this.transformDefault,""),this.buildArrayWith(this.oldPosition,[]),(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(this.isMobile=!0),this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},domReady:function(e){"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)},init:function(e){this.domReady(function(){void 0!==e&&aivaController.setOptions(e),aivaController.isPreview||aivaController.addSocket(),aivaController.trimCtas(),aivaController.preloadVideos();for(var l=0;l<aivaController.numberCtas;l++)aivaController.checkCookie(l)&&aivaController.checkPage(l)&&aivaController.checkScheduling(l)&&(aivaController.addOverlay(l),aivaController.addPopup(l),aivaController.loadEvents(l));window.onbeforeunload=function(){0===aivaController.dataSent&&aivaController.returnAnalytics()}})}};